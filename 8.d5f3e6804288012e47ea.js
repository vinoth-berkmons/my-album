(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{O7t3:function(e,t,i){"use strict";i.r(t),i.d(t,"AlbumsModule",(function(){return y}));var r=i("ofXK"),s=i("3Pt+"),a=i("wf0l"),c=i("tyNb"),n=i("quSY"),l=i("itXk"),b=i("EY2u"),o=i("jG7P"),u=i("eIep"),h=i("fXoL"),d=i("ckSG");function g(e,t){if(1&e&&(h.Qb(0,"div",25),h.Mb(1,"img",26),h.Pb()),2&e){const e=t.$implicit;h.zb(1),h.gc("src",e.thumbnailUrl,h.kc),h.gc("alt",e.title)}}function m(e,t){if(1&e){const e=h.Rb();h.Ob(0),h.Qb(1,"div",19),h.Qb(2,"div",20),h.Qb(3,"div",21),h.Xb("click",(function(){h.jc(e);const i=t.$implicit;return h.ac().selectAlbum(i)})),h.rc(4),h.Pb(),h.Qb(5,"div",22),h.Xb("click",(function(){h.jc(e);const i=t.$implicit;return h.ac().selectAlbum(i)})),h.qc(6,g,2,2,"div",23),h.bc(7,"slice"),h.Pb(),h.Qb(8,"div",24),h.rc(9),h.Pb(),h.Pb(),h.Pb(),h.Nb()}if(2&e){const e=t.$implicit;h.zb(4),h.sc(e.title),h.zb(2),h.fc("ngForOf",h.cc(7,3,e.photos,0,4)),h.zb(3),h.tc("By User ",e.userId,"")}}const f=function(e){return{disabled:e}},P=function(e){return{active:e}};let p=(()=>{class e{constructor(e,t,i,r){this.albumService=e,this.photosService=t,this.activatedRoute=i,this.router=r,this.sub=new n.a,this.visibleAlbum=[],this.firstPage=1,this.currentPage=1,this.search="",this.filteredAlbum=[],this.sortValue="",this.getAlbums$=this.albumService.getAlbums(),this.getPhotos$=this.photosService.getPhotos()}mapAlbums(e,t){return e.forEach(e=>{e.photos=t.filter(t=>t.albumId===e.id)}),e}ngOnInit(){Object(l.a)([this.getAlbums$,this.getPhotos$]).pipe(Object(u.a)(([e,t])=>(this.albums=this.mapAlbums(e,t),this.searcher=new o.a(this.albums,["title"],{caseSensitive:!0}),this.filteredAlbum=this.searcher.search(this.search),this.visibleAlbum=this.filteredAlbum?this.filteredAlbum.slice(10*(this.currentPage-1),10*this.currentPage):[],b.a))).subscribe(),this.sub=this.activatedRoute.queryParams.subscribe(e=>{this.currentPage=+e.page?+e.page:1,this.currentPage<this.firstPage?this.firstPage=this.currentPage:this.currentPage>this.firstPage+2&&(this.firstPage=this.currentPage-2),this.search=e.search,this.sortValue=e.sort,this.filteredAlbum=this.searcher?this.searcher.search(this.search):this.albums,this.filteredAlbum=this.filteredAlbum?this.filteredAlbum.sort((e,t)=>e[this.sortValue]<t[this.sortValue]?-1:e[this.sortValue]>t[this.sortValue]?1:0):this.filteredAlbum,this.visibleAlbum=this.filteredAlbum?this.filteredAlbum.slice(10*(this.currentPage-1),10*this.currentPage):[]})}ngOnDestroy(){this.sub.unsubscribe()}pageChanged(e){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{page:0===e?1:e,search:this.search},queryParamsHandling:"merge"})}searchAlbum(e){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{page:this.currentPage,search:e},queryParamsHandling:"merge"})}sortAlbum(e){console.log(e),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{page:this.currentPage,search:this.search,sort:e},queryParamsHandling:"merge"})}selectAlbum(e){this.router.navigate(["../list/"+e.id],{relativeTo:this.activatedRoute,state:{data:e}})}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(d.a),h.Lb(d.b),h.Lb(c.a),h.Lb(c.g))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-album-list"]],decls:39,vars:21,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","d-flex"],[1,"searchbox-container"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"sortby-container"],["aria-label","Default select example",1,"form-select",3,"ngModel","change"],["disabled","","selected",""],["value","id"],["value","title"],["value","userId"],[4,"ngFor","ngForOf"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"],[1,"col-lg-3","col-md-3","col-sm-4"],[1,"card","mb-3","card-container"],[1,"card-header","custom-ellipsis",3,"click"],[1,"card-body","text-success",3,"click"],["class","text-center img-inside-container",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"text-center","img-inside-container"],["width","40px",1,"rounded",3,"src","alt"]],template:function(e,t){1&e&&(h.Qb(0,"div",0),h.Qb(1,"div",1),h.Qb(2,"h2"),h.rc(3,"Albums"),h.Pb(),h.Qb(4,"div",2),h.Qb(5,"div",3),h.Qb(6,"div",4),h.Qb(7,"span",5),h.Mb(8,"i",6),h.Pb(),h.Qb(9,"input",7),h.Xb("ngModelChange",(function(e){return t.searchAlbum(e)})),h.Pb(),h.Pb(),h.Pb(),h.Qb(10,"div",8),h.Qb(11,"select",9),h.Xb("change",(function(e){return t.sortAlbum(e.target.value)})),h.Qb(12,"option",10),h.rc(13,"Sort by"),h.Pb(),h.Qb(14,"option",11),h.rc(15,"ID"),h.Pb(),h.Qb(16,"option",12),h.rc(17,"Title"),h.Pb(),h.Qb(18,"option",13),h.rc(19,"Author"),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.qc(20,m,10,7,"ng-container",14),h.Pb(),h.Qb(21,"div",1),h.Qb(22,"nav",15),h.Qb(23,"ul",16),h.Qb(24,"li",17),h.Qb(25,"a",18),h.Xb("click",(function(){return t.pageChanged(t.currentPage-1)})),h.rc(26,"Previous"),h.Pb(),h.Pb(),h.Qb(27,"li",17),h.Qb(28,"a",18),h.Xb("click",(function(){return t.pageChanged(t.firstPage)})),h.rc(29),h.Pb(),h.Pb(),h.Qb(30,"li",17),h.Qb(31,"a",18),h.Xb("click",(function(){return t.pageChanged(t.firstPage+1)})),h.rc(32),h.Pb(),h.Pb(),h.Qb(33,"li",17),h.Qb(34,"a",18),h.Xb("click",(function(){return t.pageChanged(t.firstPage+2)})),h.rc(35),h.Pb(),h.Pb(),h.Qb(36,"li",17),h.Qb(37,"a",18),h.Xb("click",(function(){return t.pageChanged(t.currentPage+1)})),h.rc(38,"Next"),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&e&&(h.zb(9),h.fc("ngModel",t.search),h.zb(2),h.fc("ngModel",t.sortValue),h.zb(9),h.fc("ngForOf",t.visibleAlbum),h.zb(4),h.fc("ngClass",h.hc(11,f,1===t.currentPage)),h.zb(3),h.fc("ngClass",h.hc(13,P,t.currentPage===t.firstPage)),h.zb(2),h.sc(t.firstPage),h.zb(1),h.fc("ngClass",h.hc(15,P,t.currentPage===t.firstPage+1)),h.zb(2),h.sc(t.firstPage+1),h.zb(1),h.fc("ngClass",h.hc(17,P,t.currentPage===t.firstPage+2)),h.zb(2),h.sc(t.firstPage+2),h.zb(1),h.fc("ngClass",h.hc(19,f,(null==t.filteredAlbum?null:t.filteredAlbum.length)/10===t.currentPage)))},directives:[s.a,s.c,s.d,s.f,s.e,s.g,r.i,r.h],pipes:[r.o],styles:[".card-container[_ngcontent-%COMP%]{margin-bottom:15px}.img-inside-container[_ngcontent-%COMP%]{margin-right:5px;float:left}"]}),e})();function v(e,t){if(1&e&&(h.Ob(0),h.Qb(1,"div",9),h.Qb(2,"div",10),h.Mb(3,"img",11),h.Qb(4,"p",12),h.rc(5),h.Pb(),h.Pb(),h.Pb(),h.Nb()),2&e){const e=t.$implicit,i=h.ac();h.zb(3),h.fc("defaultImage",i.defaultImage)("useSrcset",!0)("lazyLoad",null==e?null:e.url),h.zb(2),h.sc(null==e?null:e.title)}}let Q=(()=>{class e{constructor(e,t){var i,r,s;this.router=e,this.activatedRoute=t,this.sub=new n.a,this.search="",this.defaultImage="./assets/images/spinner.gif",this.filteredAlbum=[],this.album=null===(s=null===(r=null===(i=this.router.getCurrentNavigation())||void 0===i?void 0:i.extras)||void 0===r?void 0:r.state)||void 0===s?void 0:s.data}ngOnInit(){var e,t;this.album&&(this.searcher=new o.a(null===(e=this.album)||void 0===e?void 0:e.photos,["title"],{caseSensitive:!0})),this.filteredAlbum=null===(t=this.searcher)||void 0===t?void 0:t.search(this.search),this.sub=this.activatedRoute.queryParams.subscribe(e=>{var t,i;this.search=e.search,this.filteredAlbum=this.searcher?null===(t=this.searcher)||void 0===t?void 0:t.search(this.search):null===(i=this.album)||void 0===i?void 0:i.photos})}ngOnDestroy(){this.sub.unsubscribe()}searchAlbum(e){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{search:e},queryParamsHandling:"merge"})}}return e.\u0275fac=function(t){return new(t||e)(h.Lb(c.g),h.Lb(c.a))},e.\u0275cmp=h.Fb({type:e,selectors:[["app-album-view"]],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","d-flex"],[1,"searchbox-container"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-3","col-sm-4"],[1,"text-center","img-inside-container"],[1,"img-thumbnail",3,"defaultImage","useSrcset","lazyLoad"],[1,"custom-ellipsis","mt-1"]],template:function(e,t){1&e&&(h.Qb(0,"div",0),h.Qb(1,"div",1),h.Qb(2,"h2"),h.rc(3),h.Pb(),h.Qb(4,"div",2),h.Qb(5,"div",3),h.Qb(6,"div",4),h.Qb(7,"span",5),h.Mb(8,"i",6),h.Pb(),h.Qb(9,"input",7),h.Xb("ngModelChange",(function(e){return t.searchAlbum(e)})),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.qc(10,v,6,4,"ng-container",8),h.Pb(),h.Pb()),2&e&&(h.zb(3),h.sc(null==t.album?null:t.album.title),h.zb(6),h.fc("ngModel",t.search),h.zb(1),h.fc("ngForOf",t.filteredAlbum))},directives:[s.a,s.c,s.d,r.i,a.a],styles:[".img-inside-container[_ngcontent-%COMP%]{background:#fff;padding:5px;margin:10px}"]}),e})();const A=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Fb({type:e,selectors:[["app-albums"]],decls:1,vars:0,template:function(e,t){1&e&&h.Mb(0,"router-outlet")},directives:[c.k],styles:[""]}),e})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",data:{breadcrumb:"List"},component:p},{path:"list/:id",component:Q}]}];let y=(()=>{class e{}return e.\u0275mod=h.Jb({type:e}),e.\u0275inj=h.Ib({factory:function(t){return new(t||e)},imports:[[r.b,s.b,a.b,c.j.forChild(A)]]}),e})()}}]);