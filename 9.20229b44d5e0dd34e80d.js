(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{hHV7:function(t,e,r){"use strict";r.r(e),r.d(e,"PhotosModule",(function(){return w}));var o=r("ofXK"),s=r("tyNb"),i=r("jG7P"),a=r("quSY"),n=r("fXoL"),c=r("ckSG"),l=r("3Pt+"),h=r("wf0l");function u(t,e){if(1&t){const t=n.Rb();n.Ob(0),n.Qb(1,"div",19),n.Qb(2,"div",20),n.Xb("click",(function(){n.jc(t);const r=e.$implicit;return n.ac().selectPhoto(null==r?null:r.id)})),n.Mb(3,"img",21),n.Qb(4,"p",22),n.rc(5),n.Pb(),n.Pb(),n.Pb(),n.Nb()}if(2&t){const t=e.$implicit,r=n.ac();n.zb(3),n.fc("defaultImage",r.defaultImage)("useSrcset",!0)("lazyLoad",null==t?null:t.url),n.zb(2),n.sc(null==t?null:t.title)}}const b=function(t){return{disabled:t}},g=function(t){return{active:t}};let d=(()=>{class t{constructor(t,e,r){this.activatedRoute=t,this.photosService=e,this.router=r,this.sub=new a.a,this.search="",this.defaultImage="./assets/images/spinner.gif",this.firstPage=1,this.currentPage=1,this.visiblePhoto=[],this.filteredPhotos=[],this.sortValue=""}ngOnInit(){const t=this.activatedRoute.snapshot.data.resolvedData;this.photos=null==t?void 0:t.photos,this.searcher=new i.a(this.photos,["title"],{caseSensitive:!0}),this.filteredPhotos=this.searcher.search(this.search),this.visiblePhoto=this.filteredPhotos?this.filteredPhotos.slice(10*(this.currentPage-1),10*this.currentPage):[],this.sub=this.activatedRoute.queryParams.subscribe(t=>{this.currentPage=+t.page?+t.page:1,this.currentPage<this.firstPage?this.firstPage=this.currentPage:this.currentPage>this.firstPage+2&&(this.firstPage=this.currentPage-2),this.search=t.search,this.sortValue=t.sort,this.filteredPhotos=this.filteredPhotos?this.filteredPhotos.sort((t,e)=>t[this.sortValue]<e[this.sortValue]?-1:t[this.sortValue]>e[this.sortValue]?1:0):this.filteredPhotos,this.filteredPhotos=this.searcher?this.searcher.search(this.search):this.photos,this.visiblePhoto=this.filteredPhotos?this.filteredPhotos.slice(10*(this.currentPage-1),10*this.currentPage):[],console.log(" this.visiblePhoto",this.visiblePhoto)})}ngOnDestroy(){this.sub.unsubscribe()}pageChanged(t){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{page:0===t?1:t,search:this.search},queryParamsHandling:"merge"})}searchPhoto(t){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{search:t,sort:this.sortValue},queryParamsHandling:"merge"})}sortPhoto(t){console.log(t),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{search:this.search,sort:t},queryParamsHandling:"merge"})}selectPhoto(t){this.router.navigate(["../list/"+t],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(s.a),n.Lb(c.b),n.Lb(s.g))},t.\u0275cmp=n.Fb({type:t,selectors:[["app-photo-list"]],decls:39,vars:21,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-md-8","col-sm-12","d-flex"],[1,"searchbox-container"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search","aria-label","Search","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"sortby-container"],["aria-label","Default select example",1,"form-select",3,"ngModel","change"],["disabled","","selected",""],["value","id"],["value","title"],["value","userId"],[4,"ngFor","ngForOf"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"],[1,"col-lg-3","col-md-3","col-sm-4"],[1,"text-center","img-inside-container",3,"click"],[1,"img-thumbnail",3,"defaultImage","useSrcset","lazyLoad"],[1,"custom-ellipsis","mt-1"]],template:function(t,e){1&t&&(n.Qb(0,"div",0),n.Qb(1,"div",1),n.Qb(2,"h2"),n.rc(3,"Photos"),n.Pb(),n.Qb(4,"div",2),n.Qb(5,"div",3),n.Qb(6,"div",4),n.Qb(7,"span",5),n.Mb(8,"i",6),n.Pb(),n.Qb(9,"input",7),n.Xb("ngModelChange",(function(t){return e.searchPhoto(t)})),n.Pb(),n.Pb(),n.Pb(),n.Qb(10,"div",8),n.Qb(11,"select",9),n.Xb("change",(function(t){return e.sortPhoto(t.target.value)})),n.Qb(12,"option",10),n.rc(13,"Sort by"),n.Pb(),n.Qb(14,"option",11),n.rc(15,"ID"),n.Pb(),n.Qb(16,"option",12),n.rc(17,"Title"),n.Pb(),n.Qb(18,"option",13),n.rc(19,"Author"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.qc(20,u,6,4,"ng-container",14),n.Pb(),n.Qb(21,"div",1),n.Qb(22,"nav",15),n.Qb(23,"ul",16),n.Qb(24,"li",17),n.Qb(25,"a",18),n.Xb("click",(function(){return e.pageChanged(e.currentPage-1)})),n.rc(26,"Previous"),n.Pb(),n.Pb(),n.Qb(27,"li",17),n.Qb(28,"a",18),n.Xb("click",(function(){return e.pageChanged(e.firstPage)})),n.rc(29),n.Pb(),n.Pb(),n.Qb(30,"li",17),n.Qb(31,"a",18),n.Xb("click",(function(){return e.pageChanged(e.firstPage+1)})),n.rc(32),n.Pb(),n.Pb(),n.Qb(33,"li",17),n.Qb(34,"a",18),n.Xb("click",(function(){return e.pageChanged(e.firstPage+2)})),n.rc(35),n.Pb(),n.Pb(),n.Qb(36,"li",17),n.Qb(37,"a",18),n.Xb("click",(function(){return e.pageChanged(e.currentPage+1)})),n.rc(38,"Next"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&t&&(n.zb(9),n.fc("ngModel",e.search),n.zb(2),n.fc("ngModel",e.sortValue),n.zb(9),n.fc("ngForOf",e.visiblePhoto),n.zb(4),n.fc("ngClass",n.hc(11,b,1===e.currentPage)),n.zb(3),n.fc("ngClass",n.hc(13,g,e.currentPage===e.firstPage)),n.zb(2),n.sc(e.firstPage),n.zb(1),n.fc("ngClass",n.hc(15,g,e.currentPage===e.firstPage+1)),n.zb(2),n.sc(e.firstPage+1),n.zb(1),n.fc("ngClass",n.hc(17,g,e.currentPage===e.firstPage+2)),n.zb(2),n.sc(e.firstPage+2),n.zb(1),n.fc("ngClass",n.hc(19,b,(null==e.filteredPhotos?null:e.filteredPhotos.length)/10===e.currentPage)))},directives:[l.a,l.c,l.d,l.f,l.e,l.g,o.i,o.h,h.a],styles:[""]}),t})(),P=(()=>{class t{constructor(t){this.activatedRoute=t}ngOnInit(){const t=this.activatedRoute.snapshot.data.resolvedData;this.photo=null==t?void 0:t.photo}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(s.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["app-photo-view"]],decls:5,vars:2,consts:[[1,"container-fluid"],[1,"row"],["alt","...",1,"img-fluid","mt-5",3,"src"]],template:function(t,e){1&t&&(n.Qb(0,"div",0),n.Qb(1,"div",1),n.Qb(2,"h1"),n.rc(3),n.Pb(),n.Mb(4,"img",2),n.Pb(),n.Pb()),2&t&&(n.zb(3),n.sc(null==e.photo?null:e.photo.title),n.zb(1),n.gc("src",null==e.photo?null:e.photo.url,n.kc))},styles:[""]}),t})(),p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Fb({type:t,selectors:[["app-photos"]],decls:1,vars:0,template:function(t,e){1&t&&n.Mb(0,"router-outlet")},directives:[s.k],styles:[""]}),t})();var f=r("LRne"),v=r("lJxs"),m=r("JIr8");let Q=(()=>{class t{constructor(t){this.photoService=t}resolve(t,e){const r=t.paramMap.get("id");if(console.log(r),!r){const t=`Photo id ${r} was not found`;return console.error(t),Object(f.a)({photo:null,error:t})}return this.photoService.getPhotosById(r).pipe(Object(v.a)(t=>({photo:t})),Object(m.a)(t=>{const e="Retrieval error: "+t;return console.error(e),Object(f.a)({photo:null,error:e})}))}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(c.b))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const y=[{path:"",component:p,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:d,resolve:{resolvedData:(()=>{class t{constructor(t){this.photoService=t}resolve(t,e){return this.photoService.getPhotos().pipe(Object(v.a)(t=>({photos:t})),Object(m.a)(t=>{const e="Retrieval error: "+t;return console.error(e),Object(f.a)({photos:null,error:e})}))}}return t.\u0275fac=function(e){return new(e||t)(n.Ub(c.b))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}},{path:"list/:id",component:P,resolve:{resolvedData:Q}}]}];let w=(()=>{class t{}return t.\u0275mod=n.Jb({type:t}),t.\u0275inj=n.Ib({factory:function(e){return new(e||t)},imports:[[o.b,l.b,h.b,s.j.forChild(y)]]}),t})()}}]);